<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Notes</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <h1>📚 My Book Notes</h1>
  <a href="/new">➕ Add New Book</a>

  <form method="GET" action="/">
    <label for="sort">Sort by:</label>
    <select name="sort" id="sort" onchange="this.form.submit()">
      <option value="rating">Rating</option>
      <option value="date_read">Date Read</option>
      <option value="title">Title</option>
    </select>
  </form>

  <% books.forEach(book => { %>
    <div class="book">
      <img src="<%= book.cover_url %>" alt="Cover of <%= book.title %>">
      <h2><%= book.title %></h2>
      <p><strong>Author:</strong> <%= book.author %></p>
      <p><strong>Rating:</strong> <%= book.rating %>/10</p>
      <p><strong>Notes:</strong> <%= book.notes %></p>
      <p><strong>Date Read:</strong> <%= new Date(book.date_read).toDateString() %></p>

      <a href="/edit/<%= book._id %>">✏️ Edit</a>
      <form action="/delete/<%= book._id %>" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this book?');">
        <button type="submit">🗑️ Delete</button>
      </form>
    </div>
  <% }); %>
</body>
</html>
